@model IEnumerable<ApiFacturamaTest.Models.FacturaModel>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv=“X-UA-Compatible” content=“IE =8” />

    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">

    <title>Consultar Facturas</title>

    <link rel="stylesheet" href="~/Content/bootstrap.min.css">

    <link rel="stylesheet" href="~/Styles/Mirage.css">

    <link rel="stylesheet" href="assets/css/Navbar-Right-Links-icons.css">
</head>

<body id="body-pd" class="h-100" style="background-color: #F4F6F8;">
    <header class="shadow-sm header" id="header">
        <div class="header_toggle">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="-32 0 512 512" width="1em" height="1em" fill="currentColor"
                 id="header-toggle">
                <!-- ! . -->
                <path d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z">
                </path>
            </svg>

            <img class="img-fluid ms-3" src="~/images/Mirage-Logo.png" height="24" width="169">
        </div>

        <div class="header_img">
            <img src="https://i.imgur.com/hczKIze.jpg">
        </div>
    </header>

    <div id="nav-bar" class="l-navbar">
        <nav class="nav-mirage">
            <div>
                <div class="nav_list">
                    <a class="nav_link actived" href="#">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="-64 0 512 512" width="1em" height="1em"
                             fill="currentColor">
                            <!-- ! . -->
                            <path d="M256 0v128h128L256 0zM288 256H96v64h192V256zM224 128L224 0H48C21.49 0 0 21.49 0 48v416C0 490.5 21.49 512 48 512h288c26.51 0 48-21.49 48-48V160h-127.1C238.3 160 224 145.7 224 128zM64 72C64 67.63 67.63 64 72 64h80C156.4 64 160 67.63 160 72v16C160 92.38 156.4 96 152 96h-80C67.63 96 64 92.38 64 88V72zM64 136C64 131.6 67.63 128 72 128h80C156.4 128 160 131.6 160 136v16C160 156.4 156.4 160 152 160h-80C67.63 160 64 156.4 64 152V136zM320 440c0 4.375-3.625 8-8 8h-80C227.6 448 224 444.4 224 440v-16c0-4.375 3.625-8 8-8h80c4.375 0 8 3.625 8 8V440zM320 240v96c0 8.875-7.125 16-16 16h-224C71.13 352 64 344.9 64 336v-96C64 231.1 71.13 224 80 224h224C312.9 224 320 231.1 320 240z">
                            </path>
                        </svg>

                        <span class="nav_name">Facturas</span>
                    </a>

                    <a class="nav_link" href="#">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="-32 0 512 512" width="1em" height="1em"
                             fill="currentColor">
                            <!-- ! . -->
                            <path d="M448 336v-288C448 21.49 426.5 0 400 0H96C42.98 0 0 42.98 0 96v320c0 53.02 42.98 96 96 96h320c17.67 0 32-14.33 32-31.1c0-11.72-6.607-21.52-16-27.1v-81.36C441.8 362.8 448 350.2 448 336zM143.1 128h192C344.8 128 352 135.2 352 144C352 152.8 344.8 160 336 160H143.1C135.2 160 128 152.8 128 144C128 135.2 135.2 128 143.1 128zM143.1 192h192C344.8 192 352 199.2 352 208C352 216.8 344.8 224 336 224H143.1C135.2 224 128 216.8 128 208C128 199.2 135.2 192 143.1 192zM384 448H96c-17.67 0-32-14.33-32-32c0-17.67 14.33-32 32-32h288V448z">
                            </path>
                        </svg>

                        <span class="nav_name">Catálogos</span>
                    </a>

                    <a class="nav_link" href="#">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -32 576 576" width="1em" height="1em"
                             fill="currentColor">
                            <!-- ! . -->
                            <path d="M400 96L399.1 96.66C394.7 96.22 389.4 96 384 96H256C239.5 96 223.5 98.08 208.2 102C208.1 100 208 98.02 208 96C208 42.98 250.1 0 304 0C357 0 400 42.98 400 96zM384 128C387.5 128 390.1 128.1 394.4 128.3C398.7 128.6 402.9 129 407 129.6C424.6 109.1 450.8 96 480 96H512L493.2 171.1C509.1 185.9 521.9 203.9 530.7 224H544C561.7 224 576 238.3 576 256V352C576 369.7 561.7 384 544 384H512C502.9 396.1 492.1 406.9 480 416V480C480 497.7 465.7 512 448 512H416C398.3 512 384 497.7 384 480V448H256V480C256 497.7 241.7 512 224 512H192C174.3 512 160 497.7 160 480V416C125.1 389.8 101.3 349.8 96.79 304H68C30.44 304 0 273.6 0 236C0 198.4 30.44 168 68 168H72C85.25 168 96 178.7 96 192C96 205.3 85.25 216 72 216H68C56.95 216 48 224.1 48 236C48 247 56.95 256 68 256H99.2C111.3 196.2 156.9 148.5 215.5 133.2C228.4 129.8 241.1 128 256 128H384zM424 240C410.7 240 400 250.7 400 264C400 277.3 410.7 288 424 288C437.3 288 448 277.3 448 264C448 250.7 437.3 240 424 240z">
                            </path>
                        </svg>

                        <span class="nav_name">Cuentas</span>
                    </a>

                    <a class="nav_link" href="#">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="1em" height="1em"
                             fill="currentColor">
                            <!-- ! . -->
                            <path d="M64 400C64 408.8 71.16 416 80 416H480C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H80C35.82 480 0 444.2 0 400V64C0 46.33 14.33 32 32 32C49.67 32 64 46.33 64 64V400zM342.6 278.6C330.1 291.1 309.9 291.1 297.4 278.6L240 221.3L150.6 310.6C138.1 323.1 117.9 323.1 105.4 310.6C92.88 298.1 92.88 277.9 105.4 265.4L217.4 153.4C229.9 140.9 250.1 140.9 262.6 153.4L320 210.7L425.4 105.4C437.9 92.88 458.1 92.88 470.6 105.4C483.1 117.9 483.1 138.1 470.6 150.6L342.6 278.6z">
                            </path>
                        </svg>

                        <span class="nav_name">Estadísticas</span>
                    </a>
                </div>
            </div>
        </nav>
    </div>

    <!-- Start: Titulo -->

    <section class="pt-3">
        <!-- Start: Tabs -->
        <!-- End: Tabs -->
    </section>

    <!-- End: Titulo -->
    <!-- Start: Filtros -->

    <section class="mt-3 px-3">
        <div class="card border-0">
            <div class="card-body shadow-sm">
                <form>
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-md-6 col-xl-4 col-xxl-2 mt-2 mt-md-0">
                                <input class="form-check-input" type="radio" name="flexRadioDefault" id="radioBtnFecha" onclick="enableFechasEmision()">

                                <label class="form-label fw-semibold text-gray" for="StartDate">
                                    Fecha de emision inicial
                                </label>

                                <input type="date" id="startDate" name="fechaInicio"
                                       value="2023-01-01">
                            </div>

                            <div class="col-md-6 col-xl-4 col-xxl-2 mt-2 mt-md-0">
                                <label class="form-label fw-semibold text-gray" for="EndDate">
                                    Fecha de emicion final
                                </label>

                                <input type="date" id="endDate" name="fechaFin"
                                       value="2023-01-01">
                            </div>

                            <div class="col-md-6 col-xl-4 col-xxl-2 mt-2 mt-md-0">
                                <label class="form-label fw-semibold text-gray" for="rfcEmisor">RFC Emisor:</label>

                                <input class="form-control" type="text" placeholder="RFC" id="rfcEmisor" name="rfcEmisor"></input>


                            </div>
                            <div class="col-md-6 col-xl-4 col-xxl-2 mt-2 mt-md-0">
                                <label class="form-label fw-semibold text-gray" for="rfcReceptor">RFC Receptor:</label>

                                <input class="form-control" type="text" placeholder="RFC" name="rfcReceptor" id="rfcReceptor"></input>


                            </div>


                            <div class="col-md-6 col-xl-4 col-xxl-2 mt-2 mt-md-0">
                                <input class="form-check-input" type="radio" name="flexRadioDefault" id="radioBtnFolio" onclick="enableFolioFiscal()">

                                <label class="form-label fw-semibold text-gray" for="folioFiscal">Folio Fiscal *</label>

                                <input class="form-control" type="text" placeholder="FOLIO FISCAL" name="FolioFiscal" id="FolioFiscal"></input>
                            </div>


                            <div class="col-md-4 col-xl-3 col-xxl-2 d-flex justify-content-center align-items-center mt-2 mt-xxl-0">
                                <button class="btn d-flex justify-content-center align-items-center w-50 btn-secondary-700"
                                        @{ var botonchecado = "asd"; }
                                        type="button" value="FacturasFolio" onclick="determinaAccion()"

                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="1em"
                                         height="1em" fill="currentColor">
                                        <!-- ! . -->
                                        <path d="M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z">
                                        </path>
                                    </svg>

                                    &nbsp;Buscar
                                </button>

                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- End: Filtros -->

    <section class="mt-3">
        <div class="container-fluid">
            <div class="row">
                <div class="col-12 col-xl-4">
                    <div class="card border-0 shadow-sm h-100">
                        <!-- Start: Card header -->

                        <div class="bg-white card-header">
                            <ul class="nav nav-pills card-header-pills px-3 py-1">
                                <li class="nav-item">
                                    <a class="d-flex align-items-center link-primary-1000" href="#">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="1em"
                                             height="1em" fill="currentColor" class="me-1">
                                            <!-- ! . -->
                                            <path d="M501.6 4.186c-7.594-5.156-17.41-5.594-25.44-1.063L12.12 267.1C4.184 271.7-.5037 280.3 .0431 289.4c.5469 9.125 6.234 17.16 14.66 20.69l153.3 64.38v113.5c0 8.781 4.797 16.84 12.5 21.06C184.1 511 188 512 191.1 512c4.516 0 9.038-1.281 12.99-3.812l111.2-71.46l98.56 41.4c2.984 1.25 6.141 1.875 9.297 1.875c4.078 0 8.141-1.031 11.78-3.094c6.453-3.625 10.88-10.06 11.95-17.38l64-432C513.1 18.44 509.1 9.373 501.6 4.186zM369.3 119.2l-187.1 208.9L78.23 284.7L369.3 119.2zM215.1 444v-49.36l46.45 19.51L215.1 444zM404.8 421.9l-176.6-74.19l224.6-249.5L404.8 421.9z">
                                            </path>
                                        </svg>

                                        Emitidas
                                    </a>
                                </li>

                                <li class="nav-item ms-5">
                                    <a class="d-flex align-items-center link-primary-1000" href="#">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="1em"
                                             height="1em" fill="currentColor" class="me-1">
                                            <!-- ! . -->
                                            <path d="M447 56.25C443.5 42 430.7 31.1 416 31.1H96c-14.69 0-27.47 10-31.03 24.25L3.715 304.9C1.247 314.9 0 325.2 0 335.5v96.47c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48v-96.47c0-10.32-1.247-20.6-3.715-30.61L447 56.25zM352 352H160L128 288H72.97L121 96h270l48.03 192H384L352 352z">
                                            </path>
                                        </svg>

                                        Recibidas
                                    </a>
                                </li>
                            </ul>
                        </div>

                        <!-- End: Card header -->

                        <ul class="list-group list-group-flush border-0 overflow-auto"
                            style="min-height: 30vh;height: calc(100vh - 30vh);">
                            @if (Model.Any())
                            {

                                foreach (var factura in Model)
                                {

                                    <li class="list-group-item border-0">
                                        <div class="d-flex justify-content-between">
                                            <div>
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="-64 0 512 512" width="1em"
                                                     height="1em" fill="currentColor" class="fs-5 text-success">
                                                    <!-- ! . -->
                                                    <path d="M365.3 93.38l-74.63-74.64C278.6 6.742 262.3 0 245.4 0L64-.0001c-35.35 0-64 28.65-64 64l.0065 384c0 35.34 28.65 64 64 64H320c35.2 0 64-28.8 64-64V138.6C384 121.7 377.3 105.4 365.3 93.38zM336 448c0 8.836-7.164 16-16 16H64.02c-8.838 0-16-7.164-16-16L48 64.13c0-8.836 7.164-16 16-16h160L224 128c0 17.67 14.33 32 32 32h79.1V448zM96 280C96 293.3 106.8 304 120 304h144C277.3 304 288 293.3 288 280S277.3 256 264 256h-144C106.8 256 96 266.8 96 280zM264 352h-144C106.8 352 96 362.8 96 376s10.75 24 24 24h144c13.25 0 24-10.75 24-24S277.3 352 264 352z">
                                                    </path>
                                                </svg>

                                                <span class="text-primary-1000">
                                                    Folio:&nbsp;

                                                    <span class="text-muted">@factura.CfdiFolioFiscal</span>
                                                </span>
                                            </div>

                                            <span class="text-primary-1000">
                                                Fecha:&nbsp;

                                                <span class="text-muted">@factura.CfdiFecha</span>
                                            </span>
                                        </div>

                                        <div class="d-flex flex-column">
                                            <span class="text-primary-1000">
                                                Receptor:&nbsp;

                                                <span class="text-muted">@factura.CfdiRSocEmisor</span>
                                            </span>

                                            <span class="text-primary-1000">
                                                RFC:&nbsp;

                                                <span class="text-muted">@factura.CfdiRfcEmisor</span>
                                            </span>
                                        </div>

                                        <div class="d-flex justify-content-between">
                                            <div>
                                                <span class="text-primary-1000">
                                                    Total:&nbsp;

                                                    <span class="text-muted">$@factura.CfdiTotal</span>
                                                </span>
                                            </div>

                                            <span class="fw-semibold text-primary-1000">PUE I&nbsp;</span>
                                        </div>
                                    </li>

                                }

                            }
                            else
                            {
                                // show message when empty
                                <p>No announcements</p>
                            }
                        </ul>
                    </div>
                </div>

                <div class="col mt-3 mt-xl-0 table-responsive">
                    <div class="card border-0 shadow-sm h-100">
                        <!-- Start: Card header -->

                        <div class="bg-white d-flex justify-content-end card-header">
                            <ul class="nav nav-pills card-header-pills px-3 py-1">
                                <li class="nav-item ms-3">
                                    <a class="d-flex align-items-center link-primary-1000" href="#" onclick="tableToExcel('tblExport', 'W3C Example Table')" value="Export to Excel>
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="1em"
                                             height="1em" fill="currentColor" class="me-1">
                                            <path d="M480 352h-133.5l-45.25 45.25C289.2 409.3 273.1 416 256 416s-33.16-6.656-45.25-18.75L165.5 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h448c17.67 0 32-14.33 32-32v-96C512 366.3 497.7 352 480 352zM432 456c-13.2 0-24-10.8-24-24c0-13.2 10.8-24 24-24s24 10.8 24 24C456 445.2 445.2 456 432 456zM233.4 374.6C239.6 380.9 247.8 384 256 384s16.38-3.125 22.62-9.375l128-128c12.49-12.5 12.49-32.75 0-45.25c-12.5-12.5-32.76-12.5-45.25 0L288 274.8V32c0-17.67-14.33-32-32-32C238.3 0 224 14.33 224 32v242.8L150.6 201.4c-12.49-12.5-32.75-12.5-45.25 0c-12.49 12.5-12.49 32.75 0 45.25L233.4 374.6z">
                                            </path>
                                        </svg>

                                        Exportar a csv
                                    </a>
                                </li>
                                <li class="nav-item ms-3">
                                    <a class="d-flex align-items-center link-primary-1000" href="#">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="1em"
                                             height="1em" fill="currentColor" class="me-1">
                                            <path d="M480 352h-133.5l-45.25 45.25C289.2 409.3 273.1 416 256 416s-33.16-6.656-45.25-18.75L165.5 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h448c17.67 0 32-14.33 32-32v-96C512 366.3 497.7 352 480 352zM432 456c-13.2 0-24-10.8-24-24c0-13.2 10.8-24 24-24s24 10.8 24 24C456 445.2 445.2 456 432 456zM233.4 374.6C239.6 380.9 247.8 384 256 384s16.38-3.125 22.62-9.375l128-128c12.49-12.5 12.49-32.75 0-45.25c-12.5-12.5-32.76-12.5-45.25 0L288 274.8V32c0-17.67-14.33-32-32-32C238.3 0 224 14.33 224 32v242.8L150.6 201.4c-12.49-12.5-32.75-12.5-45.25 0c-12.49 12.5-12.49 32.75 0 45.25L233.4 374.6z">
                                            </path>
                                        </svg>

                                        Descargar
                                    </a>
                                </li>
                            </ul>
                        </div>

                        <!-- End: Card header -->

                        <div class="card-body overflow-auto" style="width: 100%; overflow: auto;">
                            <table  class='table' id="tblExport" >
                                <thead>
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Folio</th>
                                        <th scope="col">Emisor</th>
                                        <th scope="col">Rfc Emisor</th>
                                        <th scope="col">Receptor</th>
                                        <th scope="col">Rfc Receptor</th>
                                        <th scope="col">Fecha</th>
                                        <th scope="col">Total</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @{ int i = 1;}
                                    @foreach (var factura in Model)
                                    {
                                        <tr>
                                            <th scope="row">@i</th>
                                            <td>@factura.CfdiFolioFiscal</td>
                                            <td>@factura.CfdiRSocEmisor</td>
                                            <td>@factura.CfdiRfcEmisor</td>
                                            <td>@factura.CfdiRSocReceptor</td>
                                            <td>@factura.CfdiRfcReceptor</td>
                                            <td>@factura.CfdiFecha</td>
                                            <td>$@factura.CfdiTotal</td>
                                            
                                        </tr>
                                        i++;
                                    }



                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/Scripts/sidebar.js"></script>
    <script src="~/Scripts/JavaScript.js"></script>
    <script>
        function determinaAccion() {
    if (document.getElementById('radioBtnFecha').checked) {
        location.href = '@Url.Action("FacturasMultiFiltro", "Home")?fechaInicio=' + document.getElementById('startDate').value + '&fechaFin=' + document.getElementById('endDate').value + '&rfcEmisor=' + document.getElementById("rfcEmisor").value +'&rfcReceptor='+document.getElementById("rfcReceptor").value;
    } else if (document.getElementById('radioBtnFolio').checked) {
        location.href = '@Url.Action("FacturasFolio", "Home")?FolioFiscal=' + document.getElementById('FolioFiscal').value;
    }

}
    </script>

</body>

</html>